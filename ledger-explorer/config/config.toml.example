# Active profile (can be overridden with --profile or -p flag)
active_profile = "local"

[logging]
level = "info"

[neo4j]
uri = "neo4j://127.0.0.1:7687"
user = "neo4j"
password = "password"
# Number of updates to batch before committing to Neo4j (default: 100)
batch_size = 100
# Flush timeout in seconds - commit even if batch isn't full (default: 1)
flush_timeout_secs = 1

# ============================================================================
# LOCAL PROFILE - For local development with Canton sandbox
# ============================================================================
[profiles.local.ledger]
# User ID for generating fake JWT tokens (used when --use-keycloak is not specified)
fake_jwt_user = "alice"
# Party IDs to subscribe to for updates
parties = ["Alice::1220..."]
# Ledger API URL
url = "http://localhost:6865"
# Starting offset for sync when Neo4j has no data (optional)
# If not specified, falls back to ledger pruning offset
# starting_offset = 0

# Local profile typically doesn't need Keycloak
# [profiles.local.keycloak]

# ============================================================================
# DEVNET PROFILE - Example for a development network
# ============================================================================
[profiles.devnet.ledger]
fake_jwt_user = "service-account"
parties = [
    "party1::1220abc...",
    "party2::1220def..."
]
url = "https://devnet.example.com:5001"
# starting_offset = 12345

# Client Credentials Flow (for service accounts)
[profiles.devnet.keycloak]
client_id = "your-service-account-client-id"
token_endpoint = "https://keycloak.devnet.example.com/auth/realms/your-realm/protocol/openid-connect/token"
grant_type = "client_credentials"
client_secret = "your-client-secret"

# ============================================================================
# MAINNET PROFILE - Example for production network
# ============================================================================
[profiles.mainnet.ledger]
fake_jwt_user = "unused"
parties = [
    "production-party::1220..."
]
url = "https://mainnet.example.com:5001"
starting_offset = 1000000

[profiles.mainnet.keycloak]
client_id = "production-reader"
token_endpoint = "https://keycloak.mainnet.example.com/auth/realms/production/protocol/openid-connect/token"
grant_type = "client_credentials"
client_secret = "production-secret"

# ============================================================================
# Keycloak Authentication Options
# ============================================================================
#
# OPTION 1: Client Credentials Flow (for service accounts / machine-to-machine)
# Use this when you have a service account with client_id and client_secret
#
# [profiles.myprofile.keycloak]
# client_id = "your-service-account-client-id"
# token_endpoint = "https://keycloak.example.com/auth/realms/your-realm/protocol/openid-connect/token"
# grant_type = "client_credentials"
# client_secret = "your-client-secret"
#
# OPTION 2: Password Flow (for user authentication)
# Use this when authenticating as a specific user with username/password
#
# [profiles.myprofile.keycloak]
# client_id = "your-client-id"
# token_endpoint = "https://keycloak.example.com/auth/realms/your-realm/protocol/openid-connect/token"
# grant_type = "password"
# username = "your-username"
# password = "your-password"
# # client_secret = "optional-client-secret"  # Only needed if client requires authentication
